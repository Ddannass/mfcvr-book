<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–∫–∞–∑–æ—á–Ω–∞—è —ç–∫—Å–∫—É—Ä—Å–∏—è —Ç–∞–ª–æ–Ω—á–∏–∫–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
     font-family: 'Georgia', serif;
     background-color: #f0e7d8;
     background-image: url('img/background.jpg');
     background-repeat: no-repeat;
     background-position: center top;
     background-attachment: fixed;
     background-size: cover;
     padding: 40px 20px;
     min-height: 100vh;
    }

    .container {
      width: 100%;
      text-align: center;
    }

    #flipbook {
      width: 1200px;
      height: 800px;
      margin: 0 auto 20px;
      overflow: hidden;
      display: inline-block;
    }

    #flipbook .page,
    #flipbook .turn-page {
      width: 600px !important;
      height: 800px !important;
    }

    #flipbook div {
      background-color: #fff;
    }

    .page-picture {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .hidden-first-page {
      background: transparent !important;
      box-shadow: none !important;
    }
    .hidden-first-page * {
      display: none !important;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      max-width: 1200px;
      margin: 0 auto;
      gap: 10px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background: #8b4513;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
      font-weight: bold;
    }

    button:hover { background: #a0522d; }
    button:disabled { background: #ccc; cursor: not-allowed; }

    .page-counter {
      color: #8b4513;
      font-size: 16px;
      font-weight: bold;
    }
  </style>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/blasten/turn.js/turn.min.js"></script>
</head>
<body>

<div class="container">
  <div id="flipbook">
    <div class="hidden-first-page"></div>

    <div class="cover-page"><img src="img/low/2.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 2"></div>
    <div class="cover-page"><img src="img/low/3.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 3"></div>

    <div><img src="img/low/4.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 4"></div>
    <div><img src="img/high/5.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 5"></div>

    <div><img src="img/low/6.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 6"></div>
    <div><img src="img/high/7.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 7"></div>

    <div><img src="img/low/8.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 8"></div>
    <div><img src="img/high/9.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 9"></div>

    <div><img src="img/low/10.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 10"></div>
    <div><img src="img/high/11.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 11"></div>

    <div><img src="img/low/12.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 12"></div>
    <div><img src="img/high/13.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 13"></div>

    <div><img src="img/low/14.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 14"></div>
    <div><img src="img/high/15.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 15"></div>

    <div><img src="img/low/16.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 16"></div>
    <div><img src="img/high/17.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 17"></div>

    <div><img src="img/low/18.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 18"></div>
    <div><img src="img/high/19.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 19"></div>

    <div><img src="img/low/20.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 20"></div>
    <div><img src="img/high/21.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 21"></div>

    <div><img src="img/low/22.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 22"></div>
    <div><img src="img/high/23.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 23"></div>

    <div><img src="img/low/24.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 24"></div>
    <div><img src="img/high/25.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 25"></div>

    <div><img src="img/low/26.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 26" loading="lazy"></div>
    <div><img src="img/high/27.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 27" loading="lazy"></div>

    <div><img src="img/low/28.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 28" loading="lazy"></div>
    <div><img src="img/high/29.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 29" loading="lazy"></div>

    <div><img src="img/low/30.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 30" loading="lazy"></div>
    <div><img src="img/high/31.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 31" loading="lazy"></div>

    <div><img src="img/low/32.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 32" loading="lazy"></div>
    <div><img src="img/high/33.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 33" loading="lazy"></div>

    <div><img src="img/low/34.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 34" loading="lazy"></div>
    <div><img src="img/high/35.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 35" loading="lazy"></div>

    <div><img src="img/low/36.jpg" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 36" loading="lazy"></div>
    <div><img src="img/high/37.png" class="page-picture" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 37" loading="lazy"></div>
  </div>

  <div class="controls">
    <button id="prevBtn">‚Üê –ù–∞–∑–∞–¥</button>
    <span class="page-counter"><span id="currentPage">2</span> / <span id="totalPages">37</span></span>
    <button id="speakBtn" title="–û–∑–≤—É—á–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (S)">üîä</button>
    <button id="nextBtn">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
  </div>
</div>

<script>
$(function () {
  var $book = $('#flipbook');
  if ($book.length === 0) return;

  var audioMap = {
    2:  'audio/2.mp3',   // –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∞—É–¥–∏–æ –¥–ª—è 2-–π, –∏–Ω–∞—á–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å
    4:  'audio/4.mp3',
    6:  'audio/6.mp3',
    8:  'audio/8.mp3',
   10: 'audio/10.mp3',
   12: 'audio/12.mp3',
   14: 'audio/14.mp3',
   16: 'audio/16.mp3',
   18: 'audio/18.mp3',
   20: 'audio/20.mp3',
   22: 'audio/22.mp3',
   24: 'audio/24.mp3',
   26: 'audio/26.mp3',
   28: 'audio/28.mp3',
   30: 'audio/30.mp3',
   32: 'audio/32.mp3',
   34: 'audio/34.mp3',
   36: 'audio/36.mp3'
  };

  $book.turn({
    width: 1200,
    autoCenter: true,
    elevation: 50,
    gradients: true,
    display: 'double',
    page: 2
  });

  $book.bind('turning', function (e, page) {
    if (page === 1) {
      e.preventDefault();
      $book.turn('page', 2);
    }
  });

  var totalPages = $book.turn('pages');
  $('#totalPages').text(totalPages);

  var currentAudio = null;

  function stopAudio() {
    if (currentAudio) {
      currentAudio.pause();
      currentAudio.currentTime = 0;
    }
    $('#speakBtn').text('üîä');
  }

  function updateCounter() {
  var page = $book.turn('page');
  var view = $book.turn('view', page);
  var leftPage = Array.isArray(view) ? (view[0] || view[1]) : page;
  var rightPage = Array.isArray(view) ? (view[1] || view[0]) : page;

  $('#currentPage').text(page);
  $('#prevBtn').prop('disabled', leftPage <= 2);
  $('#nextBtn').prop('disabled', !rightPage || rightPage >= totalPages);

  // --- —Å–∫—Ä—ã—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –æ–∑–≤—É—á–∫–∏ –Ω–∞ —Ä–∞–∑–≤–æ—Ä–æ—Ç–µ 2‚Äì3 ---
  if (leftPage === 2 || rightPage === 3) {
    $('#speakBtn').hide();
  } else {
    $('#speakBtn').show();
  }

  stopAudio();
}


  $book.bind('turned', updateCounter);
  updateCounter();

  $('#prevBtn').on('click', function () { $book.turn('previous'); });
  $('#nextBtn').on('click', function () { $book.turn('next'); });

  $(document).on('keydown', function (e) {
  if (e.key === 'ArrowLeft')  $book.turn('previous');
  if (e.key === 'ArrowRight') $book.turn('next');
  if (e.key === 's' || e.key === 'S') toggleSpeak();
});

function toggleSpeak() {
  // –µ—Å–ª–∏ —É–∂–µ –∏–≥—Ä–∞–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
  if (currentAudio && !currentAudio.paused) {
    stopAudio();
    return;
  }

  var pageNumber = $book.turn('page');
  var view = $book.turn('view', pageNumber);

  var realPage = Array.isArray(view) ? (view[0] != null ? view[0] : view[1]) : view;
  realPage = parseInt(realPage, 10);
  if (isNaN(realPage)) {
    alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –æ–∑–≤—É—á–∫–∏');
    return;
  }

  var audioUrl = audioMap[realPage];
  if (!audioUrl) {
    alert('–ê—É–¥–∏–æ –¥–ª—è —ç—Ç–æ–≥–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –Ω–µ –∑–∞–¥–∞–Ω–æ');
    return;
  }

  stopAudio();
  currentAudio = new Audio(audioUrl);

  currentAudio.onplay  = function () { $('#speakBtn').text('‚èπÔ∏è'); };
  currentAudio.onended = function () { $('#speakBtn').text('üîä'); };
  currentAudio.onerror = function () {
    alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞—É–¥–∏–æ:\n' + audioUrl);
    $('#speakBtn').text('üîä');
  };

  currentAudio.play().catch(function () {
    alert('–ê–≤—Ç–æ–ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –µ—â—ë —Ä–∞–∑.');
  });
}

$('#speakBtn').on('click', toggleSpeak);
});
</script>

</body>
</html>







